<Page
    x:Class="Files.SettingsPages.About"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:settingsviewmodels="using:Files.ViewModels.SettingsViewModels"
    xmlns:settingsmodels="using:Files.DataModels.SettingsModels"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:ic="using:Microsoft.Xaml.Interactions.Core"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    mc:Ignorable="d">
    <Page.DataContext>
        <settingsviewmodels:AboutViewModel />
    </Page.DataContext>

    <Page.Resources>
        <ResourceDictionary>
            <DataTemplate
                x:Key="AboutFeedbackTemplate"
                x:DataType="settingsmodels:AboutFeedbackItem">
                <Grid
                    Padding="8,2"
                    HorizontalAlignment="Stretch"
                    AutomationProperties.Name="{Binding AutomationPropertiesName}">
                    <StackPanel
                        Padding="0,4"
                        Orientation="Horizontal"
                        Spacing="14">
                        <FontIcon
                            FontFamily="{StaticResource FluentUIGlyphs}"
                            Foreground="{ThemeResource SystemAccentColor}"
                            Glyph="{Binding Glyph}" />
                        <StackPanel
                            VerticalAlignment="Center"
                            Orientation="Vertical">
                            <TextBlock
                                Text="{Binding Title}" />
                            <TextBlock
                                FontSize="12"
                                Foreground="Gray"
                                Text="{Binding Subtitle}"
                                TextWrapping="Wrap" />
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <ScrollViewer>
            <StackPanel
                Margin="12,12,8,8"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                Orientation="Vertical"
                Spacing="14">
                <StackPanel.ChildrenTransitions>
                    <TransitionCollection>
                        <RepositionThemeTransition />
                    </TransitionCollection>
                </StackPanel.ChildrenTransitions>

                <TextBlock
                    x:Uid="SettingsAboutTitle"
                    FontSize="22"
                    FontWeight="Medium"
                    Text="About" />

                <StackPanel Orientation="Horizontal">
                    <Image
                        Width="60"
                        Source="/Assets/Files Icon.png"
                        Stretch="Uniform" />
                    <StackPanel Padding="12,0,0,0" Orientation="Vertical">
                        <TextBlock
                            x:Uid="SettingsAboutAppName"
                            FontSize="16"
                            FontWeight="Medium"
                            Text="Files" />
                        <TextBlock
                            x:Name="VersionNumber"
                            Padding="0,4"
                            FontSize="14"
                            Opacity=".5"
                            Text="{Binding Version}" />
                    </StackPanel>
                </StackPanel>

                <ListView
                    x:Name="FeedbackListView"
                    HorizontalAlignment="Left"
                    SelectionMode="None"
                    IsItemClickEnabled="True"
                    ItemTemplate="{StaticResource AboutFeedbackTemplate}"
                    ItemsSource="{Binding AboutFeedbackItems}">
                    <i:Interaction.Behaviors>
                        <ic:EventTriggerBehavior
                            EventName="ItemClick">
                            <ic:InvokeCommandAction
                                Command="{Binding ClickAboutFeedbackItemCommand}" />
                        </ic:EventTriggerBehavior>
                    </i:Interaction.Behaviors>
                </ListView>

                <Button
                    x:Name="OpenLogLocationButton"
                    x:Uid="SettingsAboutOpenLogLocationButton"
                    Command="{Binding OpenLogLocationCommand}"
                    Content="Open log location" />

                <TextBlock
                    x:Uid="SettingsAboutThirdPartyLicenses"
                    Margin="0,16,0,0"
                    FontSize="18"
                    Text="Third Party Licenses">
                    <TextBlock.Transitions>
                        <TransitionCollection>
                            <RepositionThemeTransition />
                        </TransitionCollection>
                    </TextBlock.Transitions>
                </TextBlock>

                <StackPanel Orientation="Horizontal" Spacing="20">
                    <TextBlock
                        VerticalAlignment="Center"
                        FontSize="16"
                        Text="QuickLook:" />

                    <HyperlinkButton
                        x:Uid="SettingsAboutWebsite"
                        AutomationProperties.Name="Website"
                        Content="Website"
                        NavigateUri="https://github.com/QL-Win/QuickLook" />

                    <HyperlinkButton
                        x:Uid="SettingsAboutLicense"
                        AutomationProperties.Name="License"
                        Content="License"
                        NavigateUri="https://github.com/QL-Win/QuickLook/blob/master/LICENSE-GPL.txt" />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>